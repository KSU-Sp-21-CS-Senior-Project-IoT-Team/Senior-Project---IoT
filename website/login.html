<!DOCTYPE html>
<html>
    <head>
            <link rel = "stylesheet" href = "style.css">
       
    </head>
    <body class = "register">
            <div class = "topnav">
                    <a href="index.html">Home</a>
                    <a href="login.html">Login</a>
                    <!--<a href="Device_Registration.html">Registration</a>-->
                    <a href="Device_Management.html">Device Management</a></body>
                </div> 
                   
        <div class = "register-page">

            
            <div class = "form">
                <form class = "registration form">

                Login Here
                <input type = "text" placeholder = "user name" id = "user"/>
                <input type = "password" placeholder = "password" id = "pass"/>
                <button onclick = "loginFunction()"> Login </button>

                Need to register?
                <li><a href="Registration.html">Register</a>
        
                </form>

            </div>
        </div>
        <script>
            function loginFunction(){
					var username = document.getElementById("user").value;
					var password = document.getElementById("pass").value;
					if (username != '' && password != '') {
						var serveruserpass = btoa(username + ":" + password);
						var request = new XMLHttpRequest();
						request.open('POST','http://sabernet.ddns.net:8080/api/login', false);
						request.setRequestHeader('Authorization', 'Basic ' + serveruserpass);
						if (request.readyState === request.DONE) {
								if (request.status === 200) {
									console.log(request.response);
									console.log(request.responseText);
									alert("Login sucessful!");
								} else {
									alert("Login failed.");
								}
							}
						request.send();
					}
            }
        </script>
    </body>
</html>
