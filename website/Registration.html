<!DOCTYPE html>
<head><link rel = "stylesheet" href = "style.css"></head>
<body class = "register">

        <div class = "topnav">
                <a href="index.html">Home</a>
                <a href="login.html">Login</a>
                <!--<a href="Device_Registration.html">Registration</a>-->
                <a href="Device_Management.html">Device Management</a></body>
            </div>   
        <div class = "register-page">
            <div class = "form">
                Register Here
                <form class = "registration form">
                <input type = "text" placeholder = "user name" id = "user"/>
                <input type = "password" placeholder = "password" id = "pass"/>
                <!--<input type = "text" placeholder = "email"/>-->
                <button onclick="registerFunction()"> Create </button>
                <p class = "msg">Have an account? <a href ="login.html"> Login </a></p>
                </form>


                <script>
                    
            function registerFunction(){
                    var username = document.getElementById('user').value;
                    var password = document.getElementById('pass').value;
					if (username != '' && password != '') {
						var serveruserpass = btoa(username + ':' + password);
						var request = new XMLHttpRequest();
						request.open('POST','http://sabernet.ddns.net:8080/api/users/register', false);
						request.setRequestHeader('Authorization', 'Basic ' + serveruserpass);
						request.onload = function () {
							if (request.readyState === request.DONE) {
								if (request.status === 200) {
									console.log(request.response);
									console.log(request.responseText);
									//alert(request.response);
								}
							}
						};
						request.send();
						alert("Registration Complete!");
					}
            }
                </script>
            </div>

        </div>
    </body>
